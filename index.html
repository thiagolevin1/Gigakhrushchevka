<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ORDO REALITAS - GIGAESTRUTURA</title>
<link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Courier+Prime&display=swap" rel="stylesheet">

<style>
    /* ===== ESTILOS GERAIS ===== */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
        background-color: #050505;
        color: #1aff1a;
        font-family: 'VT323', monospace; 
        height: 100vh;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        user-select: none;
    }

    .monitor-casing {
        width: 100%;
        height: 100%;
        position: relative;
        background: radial-gradient(circle, #001400 0%, #000000 100%);
        overflow: hidden;
    }

    .scanlines {
        position: absolute; inset: 0;
        background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2));
        background-size: 100% 4px;
        pointer-events: none; z-index: 99;
    }
    
    .glow-layer {
        position: absolute; inset: 0;
        text-shadow: 0 0 4px #1aff1a, 0 0 8px #1aff1a;
        padding: 40px;
        z-index: 10;
        animation: flicker 0.15s infinite;
        display: flex;
        flex-direction: column;
    }

    @keyframes flicker {
        0% { opacity: 0.96; } 50% { opacity: 1; } 100% { opacity: 0.94; }
    }

    /* ===== EFEITOS DE TEXTO ===== */
    
    .glitch-text { animation: glitch 0.2s linear infinite; color: #fff; }
    @keyframes glitch {
        0% { transform: translate(0); }
        20% { transform: translate(-2px, 2px); }
        40% { transform: translate(-2px, -2px); }
        60% { transform: translate(2px, 2px); }
        80% { transform: translate(2px, -2px); }
        100% { transform: translate(0); }
    }

    /* Estilo para as letras aleatórias (Vermelho e Monospace) */
    .chaos-letters {
        display: inline-block;
        color: #ff0000; 
        font-weight: bold;
        font-family: 'Courier Prime', monospace; 
        text-shadow: 2px 0px 5px red;
    }

    .glitching-number { color: #ff3333; font-weight: bold; display: inline-block; }


    /* ===== TELAS ===== */
    .screen-section { display: none; height: 100%; width: 100%; flex-direction: column; }
    
    #start-screen {
        position: absolute; inset: 0; z-index: 100;
        background: black; display: flex;
        justify-content: center; align-items: center;
    }
    #start-message { animation: blink 1s infinite; font-size: 2rem; border: 2px solid #1aff1a; padding: 20px; }

    /* Boot */
    #logo-screen { flex: 1; display: flex; justify-content: center; align-items: center; font-size: 4rem; letter-spacing: 2px; text-align: center; }
    #code-screen { flex: 1; overflow: hidden; font-size: 1.2rem; display: flex; align-items: flex-end; white-space: pre-wrap; word-break: break-all; }
    #vault-boy-screen { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; }
    .ascii-art { font-size: 10px; line-height: 10px; white-space: pre; text-align: center; margin-bottom: 20px; }

    /* Login */
    .terminal-history { flex: 1; overflow-y: auto; display: flex; flex-direction: column; justify-content: flex-end; margin-bottom: 20px;}
    .output-log { margin-bottom: 5px; font-size: 1.3rem; }
    .input-line { display: flex; font-size: 1.3rem; }
    .hud { border-top: 2px solid #1aff1a; padding-top: 10px; display: flex; justify-content: space-between; font-size: 1.2rem; margin-top: auto; }

    /* Centralizado */
    .center-content { justify-content: center; align-items: center; text-align: center; }
    .big-question { font-size: 2rem; margin-bottom: 20px; }
    .options { font-size: 1.5rem; margin-top: 20px; text-align: left;}
    .options div { margin-bottom: 10px; cursor: pointer; }
    .options div:hover { text-decoration: underline; background-color: rgba(26, 255, 26, 0.1); }

    /* Finais */
    #countdown-display { font-size: 8rem; font-weight: bold; }
    .smile-face { font-size: 14px; white-space: pre; color: #1aff1a; }
    .almeida-text { font-size: 1.4rem; text-align: left; line-height: 1.6; max-width: 800px; white-space: pre-wrap;}

    @keyframes blink { 0%, 50% { opacity: 1; } 51%, 100% { opacity: 0; } }

</style>
</head>
<body>

<audio id="snd-boot" src="boot.mp3"></audio> 
<audio id="snd-hum" src="hum.mp3" loop></audio> 
<audio id="snd-key" src="tecla.mp3"></audio> 

<div class="monitor-casing">
    <div class="scanlines"></div>
    
    <div id="start-screen">
        <div id="start-message" class="lang-swap" data-pt="[ APERTE ENTER ]" data-ru="[ НАЖМИТЕ ENTER ]">[ APERTE ENTER ]</div>
    </div>

    <div class="glow-layer">
        
        <div id="boot-sequence" class="screen-section">
            <div id="logo-screen" style="display:none;"></div>
            <div id="code-screen" style="display:none;"></div>
            <div id="vault-boy-screen" style="display:none;">
                <div class="ascii-art">
####################################################################################################
####################################################################################################
##########MM########################################################################################
##########  ############################################################################  ##########
##########mm--##########################################################################  ##########
############  ########################################################################    ##########
############  ######################################################################@@  MM##########
############  --####################################################################    ############
############    @@##################################################################    ############
############      ################################################################::    ############
############      ############################mm    --############################    ..############
############::    ::####################mm    mm######      ######################    mm############
##########  ##      ##################  ..######MMMM######@@  MM################      ##::##########
##########  ##      ################  ####    ..MMMM::    @@##  ++##############      ##  ##########
####--####  ++@@      ############  ##::  ################..  ##  ##############      ##  ##########
####  ####++####      ##########..--  ::########....MM####@@##  ##  ##########      ##::  ####  ####
####    ######        ##########  mm    ####            --##      ..MM########      mm    ##@@  ####
####++  ####MM  ##      ######@@      @@@@      --++        ##        ######mm    --    mm##    ####
####@@    ##::  MM      ######    ::####    ############    ######    ######      ##    ##++    ####
######    ##--    ..    mm##..    ####++  ################    ####++    ####      --    ##    ++####
######      ##    ##      ++      ####    ################++  ######      ..    MM    ::      ######
######      mm    --            MM####  ++######    ########  ######  ..        ##    ##--    ######
######        ++    MM        ..@@####  mm####        ######  ######                  ..mm    ######
######        ##    ##          ::######..mm            --##  ######--        ##    @@  ##    ######
######..  --  ..                                                        ::    @@    ##  ##    ######
######@@  mm    @@                                                      @@              ##    ######
########  ##    ##                                                      ##..      ##    mm  --######
########  ##                ..                                          ##--      MM    ..  @@######
########  @@      ##        MM                                          mm--    ..          ########
########  ++      @@        ##                                                  ##          ########
########  ..                ##                                        MM        ::          ########
########..              ++++                                          ##    ..              ########
########mm              ##    ##                                        ----MM            ..########
##########              ##  @@                                      ..    ##              ##########
############            ####                                      ::    ..##            ############
##############            ##  mm                                --  ##  ####          ##############
################          ####  ##    MM                          ########          ################
##############mm##          ########mm    mm++        ..##      MM######::        ##################
################  ##          ########  ++                ..::  ########        ##::################
################@@  ##          ######::      @@######--      ########        ##    ################
##################    ##          ######                    ######@@        ##    ##################
####################    --++  ##    ######::              ######    mm          @@##################
####################++          ##..    @@####        ..####      ##    ..      ####################
######################            ####..                      ####mm  ..      ######################
########################            mm######@@..      ++########            mm######################
########################..              ####################                ########################
############################        --      ############..              --##########################
################################      ..####  --####@@  @@####      MM##############################
########################################::################MM@@######################################
                </div>
                <div>VERITAS.VINCIT</div>
            </div>
        </div>

        <div id="login-interface" class="screen-section">
            <div class="terminal-history" id="login-history">
                <div class="output-log lang-swap" data-pt="ORDO REALITAS v1.0 Conectado." data-ru="ORDO REALITAS v1.0 Подключено.">ORDO REALITAS v1.0 Conectado.</div>
                <div class="output-log lang-swap" style="color:#ffcc00" data-pt="⚠️ PROTOCOLO DE SEGURANÇA ATIVO" data-ru="⚠️ ПРОТОКОЛ БЕЗОПАСНОСТИ АКТИВЕН">⚠️ PROTOCOLO DE SEGURANÇA ATIVO</div>
                <div class="output-log lang-swap" data-pt="DIGITE O NOME DA MISSÃO:" data-ru="ВВЕДИТЕ НАЗВАНИЕ МИССИИ:">DIGITE O NOME DA MISSÃO:</div>
            </div>
            
            <div class="input-line">
                <span>></span>
                <span id="user-input-display" class="user-text" style="margin-left: 10px;"></span><span style="animation:blink 1s infinite">█</span>
            </div>
            
            <div class="hud">
                <div class="lang-swap" data-pt="SYNC: 99%" data-ru="СИНХР: 99%">SYNC: 99%</div>
                <div class="lang-swap" data-pt="LOCK: ATIVO" data-ru="БЛОК: АКТИВЕН">LOCK: ATIVO</div>
            </div>
        </div>

        <div id="cylinder-screen" class="screen-section center-content">
            <div class="big-question lang-swap" data-pt="O cilindro de controle foi inserido?" data-ru="Был ли вставлен контрольный цилиндр?">O cilindro de controle foi inserido?</div>
            <div class="big-question" style="color: yellow;">[ Y / N ]</div>
        </div>

        <div id="cylinder-fail" class="screen-section center-content">
            <div class="big-question lang-swap" style="color: red; border: 2px solid red; padding: 20px;" 
                 data-pt="NECESSÁRIO CILINDRO DE CONTROLE PARA CONTINUAR" 
                 data-ru="ДЛЯ ПРОДОЛЖЕНИЯ ТРЕБУЕТСЯ КОНТРОЛЬНЫЙ ЦИЛИНДР">
                 NECESSÁRIO CILINDRO DE CONTROLE PARA CONTINUAR
            </div>
        </div>

        <div id="elevator-screen" class="screen-section">
            <div style="margin-bottom: 30px; border-bottom: 2px solid #1aff1a;">
                <h1 class="lang-swap" data-pt="CONTROLES ELEVADOR GIGA-KHRUSHCHEVKA" data-ru="УПРАВЛЕНИЕ ЛИФТОМ ГИГА-ХРУЩЕВКА">CONTROLES ELEVADOR GIGA-KHRUSHCHEVKA</h1>
            </div>
            <div class="options">
                <div class="lang-swap" data-pt="[1] Superfície / Ejeção" data-ru="[1] Поверхность / Извлечение">[1] Superfície / Ejeção</div>
                <div class="lang-swap" data-pt="[2] Núcleo / Acesso" data-ru="[2] Ядро / Доступ">[2] Núcleo / Acesso</div>
            </div>
            <div class="hud">
                <div class="lang-swap" data-pt="STATUS: AGUARDANDO" data-ru="СТАТУС: ОЖИДАНИЕ">STATUS: AGUARDANDO</div>
            </div>
        </div>

        <div id="countdown-screen" class="screen-section center-content">
            <div class="lang-swap" data-pt="INICIANDO EJEÇÃO EM:" data-ru="НАЧАЛО ИЗВЛЕЧЕНИЯ ЧЕРЕЗ:">INICIANDO EJEÇÃO EM:</div>
            <div id="countdown-display">10</div>
        </div>

        <div id="smile-screen" class="screen-section center-content">
            <div class="ascii-art smile-face">
      . .
      ___
            </div>
            <div class="big-question lang-swap" data-pt="LIBERADOS" data-ru="СВОБОДНЫ">LIBERADOS</div>
        </div>

        <div id="core-screen" class="screen-section center-content">
            <div class="almeida-text" id="almeida-content"></div>
            <br><br>
            <div id="welcome-msg" style="display:none; font-size: 2rem;" class="glitch-text lang-swap" data-pt="BEM-VINDOS A GIGAESTRUTURA" data-ru="ДОБРО ПОЖАЛОВАТЬ В ГИГАСТРУКТУРУ">BEM-VINDOS A GIGAESTRUTURA</div>
        </div>

    </div>
</div>

<script>
    /* CONFIGS */
    const sndBoot = document.getElementById('snd-boot');
    const sndHum = document.getElementById('snd-hum');
    const sndKey = document.getElementById('snd-key');
    sndBoot.volume = 0.6; sndHum.volume = 0.2; sndKey.volume = 0.4;
    function playKey() { const c = sndKey.cloneNode(); c.volume = 0.3; c.play().catch(()=>{}); }

    let state = "START"; 
    let userInput = "";
    let language = "PT"; 

    const screens = {
        start: document.getElementById('start-screen'),
        boot: document.getElementById('boot-sequence'),
        login: document.getElementById('login-interface'),
        cylinder: document.getElementById('cylinder-screen'),
        fail: document.getElementById('cylinder-fail'),
        elevator: document.getElementById('elevator-screen'),
        countdown: document.getElementById('countdown-screen'),
        smile: document.getElementById('smile-screen'),
        core: document.getElementById('core-screen')
    };

    /* RUSSIAN GLITCH (Muda o idioma geral) */
    function startRussianGlitch() {
        setInterval(() => {
            language = (language === "PT") ? "RU" : "PT";
            document.querySelectorAll('.lang-swap').forEach(el => {
                el.classList.add('glitch-text');
                setTimeout(() => {
                    if (language === "RU") {
                        el.innerText = el.getAttribute('data-ru');
                        el.style.fontFamily = "'Courier Prime', monospace"; 
                    } else {
                        el.innerText = el.getAttribute('data-pt');
                        el.style.fontFamily = "'VT323', monospace";
                    }
                    el.classList.remove('glitch-text');
                }, 200);
            });
        }, 5000);
    }

    /* INPUT LOGIC */
    document.addEventListener('keydown', (e) => {
        if (state === "START" && e.key === "Enter") startBoot();
        else if (state === "LOGIN") handleLoginInput(e);
        else if (state === "CYLINDER") {
            if (e.key.toLowerCase() === 'y') { playKey(); changeScreen('elevator'); state = "ELEVATOR"; } 
            else if (e.key.toLowerCase() === 'n') { playKey(); changeScreen('fail'); state = "FAIL"; }
        }
        else if (state === "ELEVATOR") {
            if (e.key === '1') { playKey(); startCountdown(); state = "BUSY"; } 
            else if (e.key === '2') { playKey(); startCoreSequence(); state = "BUSY"; }
        }
    });

    function changeScreen(screenName) {
        Object.values(screens).forEach(s => s.style.display = 'none');
        if(screens[screenName]) screens[screenName].style.display = 'flex';
    }

    /* BOOT */
    function startBoot() {
        state = "BOOT";
        screens.start.style.display = 'none';
        screens.boot.style.display = 'flex';
        sndBoot.play().catch(()=>{});
        runBootAnim().then(() => {
            changeScreen('login');
            sndHum.play();
            state = "LOGIN";
            startRussianGlitch();
        });
    }

    async function runBootAnim() {
        const logo = document.getElementById('logo-screen');
        const code = document.getElementById('code-screen');
        const vault = document.getElementById('vault-boy-screen');
        const wait = ms => new Promise(r => setTimeout(r, ms));

        logo.style.display = 'flex';
        logo.innerText = "заказать реальность";
        await wait(2000);
        logo.classList.add('glitch-text');
        logo.innerText = "ORDO REALITAS";
        playKey();
        await wait(200);
        logo.classList.remove('glitch-text');
        await wait(1800);
        logo.style.display = 'none';

        code.style.display = 'flex';
        let i = 0;
        let iv = setInterval(() => {
           const hex = Math.random().toString(16).substr(2,4).toUpperCase();
           code.innerText += `LOADING SECTOR ${hex}... OK\n`;
           code.scrollTop = code.scrollHeight;
           if(++i > 20) clearInterval(iv);
        }, 80);
        await wait(6000); 
        code.style.display = 'none';

        vault.style.display = 'flex';
        await wait(5000);
        vault.style.display = 'none';
    }

    /* LOGIN */
    function handleLoginInput(e) {
        if (e.key === "Backspace") userInput = userInput.slice(0, -1);
        else if (e.key === "Enter") {
            const inputLower = userInput.toLowerCase().trim();
            const logHistory = document.getElementById('login-history');
            logHistory.innerHTML += `<div class="output-log">> ${userInput}</div>`;
            if (["gigaestrutura", "matrioska", "giga-khrushchevka"].includes(inputLower)) {
                logHistory.innerHTML += `<div class="output-log" style="color:#00ff00">ACESSO CONCEDIDO.</div>`;
                state = "BUSY";
                setTimeout(() => { changeScreen('cylinder'); state = "CYLINDER"; }, 1500);
            } else {
                logHistory.innerHTML += `<div class="output-log" style="color:red">ACESSO NEGADO.</div>`;
            }
            userInput = "";
            logHistory.scrollTop = logHistory.scrollHeight;
        } else if (e.key.length === 1) userInput += e.key;
        playKey();
        document.getElementById('user-input-display').innerText = userInput;
    }

    /* CONTAGEM */
    function startCountdown() {
        changeScreen('countdown');
        let count = 10;
        const display = document.getElementById('countdown-display');
        const timer = setInterval(() => {
            count--; display.innerText = count; playKey();
            if(count <= 0) { clearInterval(timer); changeScreen('smile'); }
        }, 1000);
    }

    /* === FINAL 2: ALMEIDA COM LETRAS ALEATORIAS === */
    
    function typeText(element, text) {
        return new Promise(resolve => {
            let i = 0;
            const interval = setInterval(() => {
                element.innerHTML += text.charAt(i);
                playKey(); i++;
                if (i >= text.length) { clearInterval(interval); resolve(); }
            }, 50);
        });
    }

    // Função que cria letras aleatórias
    function startRandomLetterGlitch(element) {
        const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"; // Letras e números
        setInterval(() => {
            let r = "";
            // Gera 9 letras aleatórias (mesmo tamanho da palavra Arquiteto)
            for(let i=0; i<9; i++) {
                 r += chars[Math.floor(Math.random() * chars.length)];
            }
            element.innerText = r;
        }, 80); // Muda a cada 80ms
    }

    async function startCoreSequence() {
        changeScreen('core');
        const container = document.getElementById('almeida-content');
        container.innerHTML = ""; 

        // 1. Digita a primeira parte
        await typeText(container, "Eu vi o Log da Unidade 7.892. Vocês entendem agora? Não dá para lutar contra a obra. Ela é grande demais. A única chance é matar o ");

        // 2. Insere o SPAN onde as letras vão ficar trocando
        container.innerHTML += ' <span id="chaos-letters" class="chaos-letters"></span>'; 
        
        // 3. Ativa o efeito de letras aleatórias nesse span
        startRandomLetterGlitch(document.getElementById('chaos-letters'));
        playKey();

        // 4. Digita o resto
        await typeText(container, ". Eu estou no Nível ");

        // 5. Número tiltado
        container.innerHTML += `<span id="lvl-glitch" class="glitching-number">000</span>`;
        startNumberGlitch();

        // 6. Mensagem Final
        setTimeout(() => {
            document.getElementById('welcome-msg').style.display = 'block';
        }, 2000);
    }

    function startNumberGlitch() {
        setInterval(() => {
            const el = document.getElementById('lvl-glitch');
            if(el) el.innerText = Math.floor(Math.random() * 999);
        }, 100);
    }

</script>

</body>
</html>